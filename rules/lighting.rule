TopRule = $* (
    $TurnOn {action = 'on'} |
    $TurnOff {action = 'off'} |
    $Dim {action = 'dim'} |
    $Connect {action = 'connect'}
) $*;

Change = (turn | switch | flip);
TurnOn = $Change $* (on | up);
TurnOff = $Change $* off;
Dim = (dim | ($Change down));
Connect = (connect | try | retry);
